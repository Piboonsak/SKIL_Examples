{"paragraphs":[{"text":"%spark.dep\n\nz.load(\"com.github.haifengl:smile-core:jar:1.5.1\")","user":"admin","dateUpdated":"2018-06-23T06:52:16+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@37f6f5b\n"}]},"apps":[],"jobName":"paragraph_1529735591530_154695200","id":"20180317-001737_1250212318","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T06:34:16+0000","dateFinished":"2018-06-23T06:34:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:110"},{"text":"import smile.clustering.GMeans\nimport smile.clustering.KMeans","user":"admin","dateUpdated":"2018-06-23T06:43:44+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import smile.clustering.GMeans\nimport smile.clustering.KMeans\n"}]},"apps":[],"jobName":"paragraph_1529735591536_163159676","id":"20180317-002110_1820742366","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T06:43:44+0000","dateFinished":"2018-06-23T06:43:44+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:111"},{"title":"Imports","text":"import io.skymind.zeppelin.utils._\nimport org.nd4j.linalg.factory.Nd4j\n","user":"admin","dateUpdated":"2018-06-23T06:43:46+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import io.skymind.zeppelin.utils._\nimport org.nd4j.linalg.factory.Nd4j\n"}]},"apps":[],"jobName":"paragraph_1529735591536_163159676","id":"20180317-001720_1473370917","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T06:43:46+0000","dateFinished":"2018-06-23T06:43:46+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:112"},{"text":"val kmeanData = Array(\n    Array(-1.0, -1.2, -1.1), \n    Array(-1.1, -1.1, -1.0), \n    Array(-0.9, -0.9, -1.2), \n    Array(-0.9, -1.0, -0.9), \n\n    Array(0.0, 0.0, 0.0), \n    Array(0.1, 0.2, 0.3), \n    Array(-0.1, 0.2, -0.1), \n    Array(0.1, 0.1, 0.1), \n    \n    Array(1.0, 1.0, 1.0),\n    Array(1.1, 1.1, 1.1),\n    Array(1.0, 0.9, 0.9),\n    Array(1.2, 0.9, 1.0)\n)\n\nval kmeans = new KMeans(kmeanData, 3)\n\nkmeans.predict(Array(-1.0, 0.0, 0.0))","user":"admin","dateUpdated":"2018-06-23T06:43:48+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"kmeanData: Array[Array[Double]] = Array(Array(-1.0, -1.2, -1.1), Array(-1.1, -1.1, -1.0), Array(-0.9, -0.9, -1.2), Array(-0.9, -1.0, -0.9), Array(0.0, 0.0, 0.0), Array(0.1, 0.2, 0.3), Array(-0.1, 0.2, -0.1), Array(0.1, 0.1, 0.1), Array(1.0, 1.0, 1.0), Array(1.1, 1.1, 1.1), Array(1.0, 0.9, 0.9), Array(1.2, 0.9, 1.0))\nkmeans: smile.clustering.KMeans = \nK-Means distortion: 0.34500\nClusters of 12 data points of dimension 3:\n  0\t    4 (33.3%)\n  1\t    4 (33.3%)\n  2\t    4 (33.3%)\n\nres4: Int = 2\n"}]},"apps":[],"jobName":"paragraph_1529735591537_162774927","id":"20180320-081656_1126687665","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T06:43:48+0000","dateFinished":"2018-06-23T06:43:49+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:113"},{"text":"val centers = kmeans.centroids()\n\nval array = Nd4j.create(centers)","user":"admin","dateUpdated":"2018-06-23T06:43:51+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"centers: Array[Array[Double]] = Array(Array(1.0750000000000002, 0.9750000000000001, 1.0), Array(-0.9750000000000001, -1.0499999999999998, -1.05), Array(0.025, 0.125, 0.07500000000000001))\narray: org.nd4j.linalg.api.ndarray.INDArray = \n[[    1.0750,    0.9750,    1.0000], \n [   -0.9750,   -1.0500,   -1.0500], \n [    0.0250,    0.1250,    0.0750]]\n"}]},"apps":[],"jobName":"paragraph_1529735591537_162774927","id":"20180320-081940_122552663","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T06:43:51+0000","dateFinished":"2018-06-23T06:43:52+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:114"},{"text":"import java.io.File\nimport org.nd4j.serde.binary.BinarySerde\n\nBinarySerde.writeArrayToDisk(array, new File(\"/tmp/centroids.bin\"))\n\nimport java.io.PrintWriter\n\nval writer = new PrintWriter(new File(\"/tmp/centroids.labels\"))\n\nfor (i <- centers.indices) {\n    writer.println(i.toString)\n}\nwriter.close()\n","user":"admin","dateUpdated":"2018-06-23T06:43:54+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import java.io.File\nimport org.nd4j.serde.binary.BinarySerde\nimport java.io.PrintWriter\nwriter: java.io.PrintWriter = java.io.PrintWriter@7069162f\n"}]},"apps":[],"jobName":"paragraph_1529735591537_162774927","id":"20180317-001720_1560610197","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T06:43:54+0000","dateFinished":"2018-06-23T06:43:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:115"},{"text":"// After deployment:\nimport com.mashape.unirest.http.Unirest\nimport org.json.JSONObject\n\nimport java.text.MessageFormat\n\nimport org.nd4j.linalg.factory.Nd4j\nimport org.nd4j.serde.base64.Nd4jBase64\n\nval skilContext = new SkilContext()\n\n\nUnirest.setDefaultHeader(\"Authorization\", \"Token \" + skilContext.client.getAuthToken);\n\nval nearestNeighborResultsKnn = Unirest.post(MessageFormat.format(\"http://localhost:9008/endpoints/demo/knn/knntest/default/{0}\", \n                                                                    \"knn\"))\n    .header(\"accept\", \"application/json\")\n    .header(\"Content-Type\", \"application/json\")\n    .body(new JSONObject() //Using this because the field functions couldn't get translated to an acceptable json\n            .put(\"k\", 2)\n            .put(\"index\", 1)\n            .toString())\n    .asJson()\n    .getBody().getObject()\n    \nval base64Array = Nd4jBase64.base64String(Nd4j.create(Array(0.0, 0.0, 0.0)));\n\nval nearestNeighborResultsKnnNew = Unirest.post(MessageFormat.format(\"http://localhost:9008/endpoints/demo/knn/knntest/default/{0}\", \n                                                                    \"knnnew\"))\n    .header(\"accept\", \"application/json\")\n    .header(\"Content-Type\", \"application/json\")\n    .body(new JSONObject() //Using this because the field functions couldn't get translated to an acceptable json\n            .put(\"k\", 2)\n            .put(\"index\", 1)\n            .put(\"ndarray\", base64Array)\n            .toString())\n    .asJson()\n    .getBody().getObject()","user":"admin","dateUpdated":"2018-06-23T07:37:22+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import com.mashape.unirest.http.Unirest\nimport org.json.JSONObject\nimport java.text.MessageFormat\nimport org.nd4j.linalg.factory.Nd4j\nimport org.nd4j.serde.base64.Nd4jBase64\nskilContext: io.skymind.zeppelin.utils.SkilContext = io.skymind.zeppelin.utils.SkilContext@7efeea42\nnearestNeighborResultsKnn: org.json.JSONObject = {\"results\":[{\"distance\":1.6372615098953247,\"index\":2,\"label\":null},{\"distance\":0,\"index\":0,\"label\":null}]}\nbase64Array: String = \n\"AAdKQVZBQ1BQAAAACAADSU5UAAAAAgAAAAEAAAADAAAAAQAAAAEAAAAAAAAAAQAAAGMAB0pBVkFD\r\nUFAAAAADAAVGTE9BVAAAAAAAAAAAAAAAAA==\r\n\"\nnearestNeighborResultsKnnNew: org.json.JSONObject = {\"results\":[{\"distance\":1.762455701828003,\"index\":0,\"label\":null},{\"distance\":0.1479019969701767,\"index\":2,\"label\":null}]}\n"}]},"apps":[],"jobName":"paragraph_1529735591537_162774927","id":"20180320-084023_821120962","dateCreated":"2018-06-23T06:33:11+0000","dateStarted":"2018-06-23T07:37:22+0000","dateFinished":"2018-06-23T07:37:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:116"},{"dateUpdated":"2018-06-23T06:33:11+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1529735591538_163929173","id":"20180320-090109_1030112091","dateCreated":"2018-06-23T06:33:11+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:117"}],"name":"smiletest","id":"2DHHDG9BS","angularObjects":{"2DFT2DUTC:existing_process":[],"2DG8SEE28:existing_process":[],"2DHD5S1ZA:existing_process":[],"2DG6CZXU8:existing_process":[],"2DHS3HSRT:existing_process":[],"2DG15E2GX:existing_process":[],"2DH3B1WMC:existing_process":[],"2DJAPCCXV:existing_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}