{"paragraphs":[{"title":"Documentation and Samples","text":"%md\n<a target=\"_blank\" href=\"http://deeplearning4j.org/doc\">DL4J Documentation</a>\n<a target=\"_blank\" href=\"https://nd4j.org/doc/\">ND4J Documentation</a>\n<a target=\"_blank\" href=\"https://deeplearning4j.org/datavecdoc/\">DataVec (ETL) Documentation</a>\nSKIL also comes with support for <a target=\"_blank\" href=\"https://keras.io\">Keras</a> and <a target=\"_blank\" href=\"https://www.tensorflow.org/\">Tensorflow</a> with %pyspark\nFor examples please see <a target=\"_blank\" href=\"https://github.com/SkymindIO/SKIL_Examples\">SKIL_Examples</a>","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/markdown","results":{},"enabled":true,"editorSetting":{"language":"markdown","editOnDblClick":true},"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p><a target=\"_blank\" href=\"http: //deeplearning4j.org/doc\">DL4J Documentation</a>\n<br  /><a target=\"_blank\" href=\"https: //nd4j.org/doc/\">ND4J Documentation</a>\n<br  /><a target=\"_blank\" href=\"https: //deeplearning4j.org/datavecdoc/\">DataVec (ETL) Documentation</a>\n<br  />SKIL also comes with support for <a target=\"_blank\" href=\"https: //keras.io\">Keras</a> and <a target=\"_blank\" href=\"https: //www.tensorflow.org/\">Tensorflow</a> with %pyspark\n<br  />For examples please see <a target=\"_blank\" href=\"https: //github.com/SkymindIO/SKIL_Examples\">SKIL_Examples</a></p>\n"}]},"apps":[],"jobName":"paragraph_1515138287741_-1061936224","id":"20171222-012038_1234522875","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:27+0000","dateFinished":"2018-01-05T09:00:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:717"},{"text":"%pyspark\n\nimport numpy as np\nimport tensorflow as tf\n","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287741_-1061936224","id":"20171222-012038_259612725","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:27+0000","dateFinished":"2018-01-05T09:00:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:718"},{"text":"%pyspark\n\nfrom tensorflow.examples.tutorials.mnist import input_data\nmnist = input_data.read_data_sets(\"/tmp/MNIST_data/\", one_hot=True)\n","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Extracting /tmp/MNIST_data/train-images-idx3-ubyte.gz\nExtracting /tmp/MNIST_data/train-labels-idx1-ubyte.gz\nExtracting /tmp/MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting /tmp/MNIST_data/t10k-labels-idx1-ubyte.gz\n"}]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-012130_754864106","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:27+0000","dateFinished":"2018-01-05T09:00:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:719"},{"text":"%pyspark\n\nlearning_rate = 0.01\ntraining_epochs = 25\nbatch_size = 100\ndisplay_step = 1\n\nclass MyModel(object):\n    def __init__(self, n_inputs, n_outputs):\n        self.x = tf.placeholder(tf.float32, [None, n_inputs], name=\"input0\")\n        self.y = tf.placeholder(tf.float32, [None, n_outputs])\n        \n        self.model = tf.layers.dense(self.x, n_inputs / 2, activation=tf.nn.sigmoid)\n        self.model = tf.layers.dense(self.model, n_outputs)\n        \n        self.output = tf.nn.softmax(self.model, name=\"output0\")\n        \n        self.loss = tf.losses.softmax_cross_entropy(onehot_labels=self.y, logits=self.model)\n        self.optimizer = tf.train.GradientDescentOptimizer(learning_rate=learning_rate)\n        \n        self.train_op = self.optimizer.minimize(loss=self.loss)\n\nmodel = MyModel(784, 10)\n\ninit = tf.global_variables_initializer()","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-012239_797309492","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:27+0000","dateFinished":"2018-01-05T09:00:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:720"},{"text":"%pyspark\n\nsess = tf.Session()\nsess.run(init)","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-012756_2138621448","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:28+0000","dateFinished":"2018-01-05T09:00:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:721"},{"text":"%pyspark\nall_saver = tf.train.Saver()\nall_saver.save(sess, \"/tmp/tfmodel/chkpt\")\ntf.train.write_graph(sess.graph_def, \"/tmp/tfmodel\", \"model.txt\", True)\nall_saver = tf.train.Saver()","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-013409_629596946","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:28+0000","dateFinished":"2018-01-05T09:00:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:722"},{"text":"%pyspark\n\ncheckpoint = tf.train.get_checkpoint_state(\"/tmp/tfmodel\")\ninput_checkpoint = checkpoint.model_checkpoint_path\n","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-014245_247955002","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:28+0000","dateFinished":"2018-01-05T09:00:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:723"},{"text":"%pyspark\n\nfor _ in range(1000):\n  batch_xs, batch_ys = mnist.train.next_batch(100)\n  sess.run(model.train_op, feed_dict={model.x: batch_xs, model.y: batch_ys})","user":"admin","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-013150_699526137","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:28+0000","dateFinished":"2018-01-05T09:00:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:724"},{"text":"%pyspark\n\nsess.run(model.output, feed_dict={model.x: mnist.test.images[0,:].reshape(1, 784)})","dateUpdated":"2018-01-05T09:00:27+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"array([[ 0.03387397,  0.02207623,  0.03358266,  0.02691653,  0.06478149,\n         0.0468622 ,  0.01734241,  0.60294849,  0.02902032,  0.12259561]], dtype=float32)\n"}]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-013042_965577534","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:725","user":"admin","dateFinished":"2018-01-05T09:00:32+0000","dateStarted":"2018-01-05T09:00:29+0000"},{"text":"%pyspark\n\nfrom tensorflow.python.tools import freeze_graph\n\nfreeze_graph.freeze_graph(input_graph=\"/tmp/tfmodel/model.txt\",\n                          input_saver=\"\",\n                          input_checkpoint=input_checkpoint,\n                          output_graph=\"/tmp/tfmodel/model.pb\",\n                          input_binary=False,\n                          output_node_names=\"output0\",\n                          restore_op_name=\"save/restore_all\",\n                          filename_tensor_name=\"save/Const:0\",\n                          clear_devices=True,\n                          initializer_nodes=\"\")","user":"admin","dateUpdated":"2018-01-05T09:00:45+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Converted 4 variables to const ops.\n15 ops in the final graph.\n"}]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-014354_937441111","dateCreated":"2018-01-05T07:44:47+0000","dateStarted":"2018-01-05T09:00:45+0000","dateFinished":"2018-01-05T09:00:46+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:726"},{"text":"%sh ls /tmp/tfmodel/\n","dateUpdated":"2018-01-05T09:00:49+0000","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-014608_1027633788","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:727","user":"admin","dateFinished":"2018-01-05T09:00:49+0000","dateStarted":"2018-01-05T09:00:49+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"checkpoint\nchkpt.data-00000-of-00001\nchkpt.index\nchkpt.meta\nmodel.pb\nmodel.txt\n"}]}},{"text":"%pyspark\nimport skil","dateUpdated":"2018-01-05T09:00:58+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287742_-1060781978","id":"20171222-014916_1684582079","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:728","user":"admin","dateFinished":"2018-01-05T09:00:58+0000","dateStarted":"2018-01-05T09:00:58+0000"},{"text":"%pyspark\n\nskilContext = skil.SkilContext(sc)","dateUpdated":"2018-01-05T09:00:59+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287743_-1061166726","id":"20171222-015014_57956431","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:729","user":"admin","dateFinished":"2018-01-05T09:00:59+0000","dateStarted":"2018-01-05T09:00:59+0000"},{"text":"%pyspark\n\nhelp(skilContext.addModelToExperiment)","dateUpdated":"2018-01-05T09:01:00+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Help on method addModelToExperiment in module skil:\n\naddModelToExperiment(self, z, model, name=None) method of skil.SkilContext instance\n    Add the model to the model list inside the SKIL Experiment.\n    :param z: The ZeppelinContext\n    :param model: The model to save or path.\n    :param name: Optional name of the model.\n    :return: The ModelInstanceID for use with adding EvaluationResults.\n\n"}]},"apps":[],"jobName":"paragraph_1515138287743_-1061166726","id":"20171222-015540_1545471148","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:731","user":"admin","dateFinished":"2018-01-05T09:01:00+0000","dateStarted":"2018-01-05T09:01:00+0000"},{"text":"%pyspark\n\npath = str(skilContext.copyModel(z, \"/tmp/tfmodel/model.pb\", \"tensorflow\"))","dateUpdated":"2018-01-05T09:01:02+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287743_-1061166726","id":"20171222-015739_1375876421","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:732","user":"admin","dateFinished":"2018-01-05T09:01:02+0000","dateStarted":"2018-01-05T09:01:02+0000"},{"text":"%pyspark\n\nmodel_id = skilContext.addModelToExperiment(z, path, \"tfModel\")","dateUpdated":"2018-01-05T09:01:04+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1515138287743_-1061166726","id":"20171222-015900_227413284","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:734","user":"admin","dateFinished":"2018-01-05T09:01:04+0000","dateStarted":"2018-01-05T09:01:04+0000"},{"text":"%pyspark\nmodel_id","dateUpdated":"2018-01-05T09:01:07+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"'f58cf98e-f1f6-11e7-ba38-000d3a733ef1'\n"}]},"apps":[],"jobName":"paragraph_1515138287743_-1061166726","id":"20171222-015946_652878550","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:735","user":"admin","dateFinished":"2018-01-05T09:01:07+0000","dateStarted":"2018-01-05T09:01:07+0000"},{"text":"%pyspark\n","dateUpdated":"2018-01-05T09:00:28+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1515138287743_-1061166726","id":"20171222-020024_2062877158","dateCreated":"2018-01-05T07:44:47+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:736","user":"admin"}],"name":"tfmodel","id":"2D5HAGEMC","angularObjects":{"2D3EC9TP5:existing_process":[],"2D423FPCG:existing_process":[],"2D56DNVVS:existing_process":[],"2D5MKKURM:existing_process":[],"2D586PF1H:existing_process":[],"2D3TGPZ5A:existing_process":[],"2D5KES1N2:existing_process":[],"2D3N9NQWY:existing_process":[],"2D56FMZYN:existing_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}